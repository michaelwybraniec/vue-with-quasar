(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"5c65":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-page",{staticClass:"q-pa-lg bg-grey-2"},[r("div",{staticClass:"row flex-center"},[r("div",{staticClass:"col-10 q-pl-xl q-pr-xl q-pt-md",staticStyle:{"background-color":"#e8e8e8","border-radius":"5px"}},[r("form",{on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.onSubmit(t)}}},[r("q-select",{ref:"search",attrs:{disable:e.buttons.search.loading,"use-input":"","hide-selected":"","fill-input":"",clearable:"","no-error-icon":"",dense:"","clear-icon":"close","input-debounce":"0",name:"List",rules:[function(e){return!!e||"Required *"},function(e){return e.length<=15||"Max 15 character allowed."}],"lazy-rules":"",options:this.filter.options,label:"Search","label-color":"primary","options-selected-class":"text-deep-primary bg-info"},on:{filter:e.filterFn,"new-value":e.newValue},scopedSlots:e._u([{key:"no-option",fn:function(){return[r("q-item",[r("q-item-section",{staticClass:"text-grey"},[e._v("No results")])],1)]},proxy:!0},{key:"after",fn:function(){return[e.buttons.search.loading?e._e():r("q-btn",{attrs:{loading:e.buttons.search.loading,color:e.buttons.search.color,icon:"search",label:"Search",unelevated:""},on:{click:function(t){return e.onSubmit()}}})]},proxy:!0}]),model:{value:e.input.search,callback:function(t){e.$set(e.input,"search",t)},expression:"input.search"}})],1)])]),this.heroes&&!e.loading?r("div",["success"!==this.heroes.response&&1!==this.heroes.length?r("div",[this.heroes.length?r("div",{staticClass:"row flex flex-center"},[r("div",{staticClass:"col-10 q-pa-sm flex flex-center",staticStyle:{"background-color":"#e8e8e8","border-radius":"5px"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 text-center q-pb-sm"},[e._v("\n                            Last searched phrase:\n                            "),r("b",{staticStyle:{"font-size":"18px"}},[e._v("'"+e._s(this.input.previousSearch)+"'")]),e._v(", heroes found:\n                            "),r("b",{staticStyle:{"font-size":"18px"}},[e._v(e._s(this.heroes.length))])]),r("div",{staticClass:"col-12 text-center flex flex-center"},[r("q-pagination",{attrs:{max:this.pagination.chunkedHeroes.length-1,input:!0},model:{value:e.pagination.currentPage,callback:function(t){e.$set(e.pagination,"currentPage",t)},expression:"pagination.currentPage"}})],1),r("div",{staticClass:"col-12 text-center flex flex-center"},[r("div",{staticStyle:{width:"100px"}},[r("q-select",{attrs:{dense:"",options:this.pagination.itemsPerPageOptions,label:"Show items:"},model:{value:e.itemsPerPage,callback:function(t){e.itemsPerPage=t},expression:"itemsPerPage"}})],1),r("q-btn-group",{attrs:{unelevated:""}},[r("q-btn",{attrs:{unelevated:"",label:"Name",color:"name"===this.sort.attribute?"negative":"primary"},on:{click:function(t){return e.onSort("name")}}},["name"===this.sort.attribute?r("div",[this.sort.inverse?r("q-icon",{attrs:{name:"keyboard_arrow_up"}}):e._e(),this.sort.inverse?e._e():r("q-icon",{attrs:{name:"keyboard_arrow_down"}})],1):e._e()]),r("q-btn",{attrs:{unelevated:"",label:"Stars",color:"stars"===this.sort.attribute?"negative":"primary"},on:{click:function(t){return e.onSort("stars")}}},["stars"===this.sort.attribute?r("div",[this.sort.inverse?r("q-icon",{attrs:{name:"keyboard_arrow_up"}}):e._e(),this.sort.inverse?e._e():r("q-icon",{attrs:{name:"keyboard_arrow_down"}})],1):e._e()])],1)],1)])])]):e._e(),r("div",{staticClass:"row justify-center q-mt-lg"},e._l(this.pagination.chunkedHeroes[this.pagination.currentPage],(function(e,t){return r("div",{key:t+e+"-search"},[r("HeroCard",{attrs:{hero:e}})],1)})),0)]):r("div",[r("div",{staticClass:"row justify-center q-mt-lg"},[r("div",{staticStyle:{width:"700px","max-width":"80vw"}},[r("HeroDetails",{attrs:{hero:e.heroes[0]}})],1)])])]):e._e(),e.loading?r("div",{staticClass:"no-hero absolute-center"},[r("div",{staticClass:"text-h2 text-center"},[r("q-spinner",{attrs:{color:"primary",size:"3em",thickness:2}})],1)]):e._e(),e.apiError&&!e.loading?r("div",{staticClass:"no-hero absolute-center"},[r("div",{staticClass:"bg-negative text text-center text-white"},[r("div",[e.apiError?r("p",[e._v("\n                    API err:\n                    "),r("span",{staticClass:"bg-dark q-pa-sm q-ml-sm"},[e._v(e._s(e.apiError))])]):e._e(),this.message.error?r("p",{staticClass:"g-ml-sm"},[e._v("\n                      Customized err:\n                    "),r("span",{staticClass:"bg-dark q-pa-sm q-ml-sm"},[e._v("\n                        "+e._s(this.message.error)+"\n                    ")])]):e._e()])])]):e._e()])},n=[],a=(r("6762"),r("2fdb"),r("967e")),i=r.n(a),o=(r("386d"),r("96cf"),r("fa84")),c=r.n(o),l=(r("7f7f"),r("dd9b")),u=r("9f5f"),d=r("c069"),h=r("e222"),p={name:"Search",components:{HeroCard:u["a"],HeroDetails:d["a"]},data:function(){return{search:null,loading:!1,filter:{options:h.db.heroList.map((function(e){return e.name})),list:h.db.heroList.map((function(e){return e.name}))},buttons:{search:{loading:!1,color:"primary"}},message:{info:void 0,error:void 0,success:void 0},input:{search:null,previousSearch:null},favorites:{data:[],length:0},pagination:{currentPage:1,itemsPerPageOptions:[5,10,50],chunkedHeroes:[]},itemsPerPage:20,sort:{attribute:"name",inverse:!1}}},watch:{apiError:function(e){switch(e){case"access denied":this.message.error="Api access denied, try later pls !";break;case"character with given name not found":this.message.error="Hero with a given id or name not found :-(";break;default:this.message.error=e}},heroes:function(e){var t=0;for(t=0;t<e.length;t+=this.itemsPerPage){var r=e.slice(t,t+this.itemsPerPage);this.pagination.chunkedHeroes.push(r)}},itemsPerPage:function(e){var t=0,r=[];for(t=0;t<this.heroes.length;t+=e){var s=this.heroes.slice(t,t+e);r.push(s)}this.pagination.chunkedHeroes=r}},computed:{heroes:function(){return l["a"].getters.getAvailableHero},apiError:function(){return l["a"].getters.getApiErrorMsg}},methods:{onSubmit:function(){var e=this;return c()(i.a.mark((function t(){return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.search.validate(),!e.$refs.search.hasError){t.next=4;break}t.next=22;break;case 4:if(console.log("Input:",e.input.search),e.input.previousSearch=e.input.search,""===e.input.search){t.next=21;break}return e.message.info="Loading...",e.loading=!0,e.buttons.search.loading=!0,e.buttons.search.disabled=!0,e.buttons.search.color="negative",t.next=14,l["a"].dispatch("getHeroAction",e.input.search);case 14:e.message.info=void 0,e.heroes&&(e.message.error=void 0),e.loading=!1,e.buttons.search.loading=!1,e.buttons.search.color="primary",t.next=22;break;case 21:e.message.error="Input empty, I cannot read minds yet!";case 22:case"end":return t.stop()}}),t)})))()},filterFn:function(e,t){var r=this;t((function(){if(""===e)r.filter.options=r.filter.list;else{var t=e.toLowerCase();r.filter.options=r.filter.list.filter((function(e){return e.toLowerCase().indexOf(t)>-1}))}}))},newValue:function(e,t){e.length>=1&&(this.filter.options.includes(e)||(t(e,"add-unique"),this.input.confirm=!0))},onSort:function(e){this.sort.attribute=e,this.sort.inverse=!this.sort.inverse,this.pagination.chunkedHeroes[this.pagination.currentPage]=this.sortByAttribute(this.pagination.chunkedHeroes[this.pagination.currentPage],e,this.sort.inverse)},sortByAttribute:function(e,t,r){return"name"===t?e.sort((function(e,t){return e.name===t.name?0:r?+(e.name>t.name)||-1:+(e.name<t.name)||-1})):"stars"===t?e.sort((function(e,t){return e.powerstars[6].value.rounded===t.powerstars[6].value.rounded?0:r?+(e.powerstars[6].value.rounded<t.powerstars[6].value.rounded)||-1:+(e.powerstars[6].value.rounded>t.powerstars[6].value.rounded)||-1})):void 0}}},g=p,f=(r("b9d0"),r("2877")),m=r("eebe"),v=r.n(m),b=r("9989"),x=r("ddd8"),w=r("66e5"),_=r("4074"),k=r("9c40"),y=r("3b16"),q=r("e7a9"),P=r("0016"),C=r("0d59"),S=Object(f["a"])(g,s,n,!1,null,null,null);t["default"]=S.exports;v()(S,"components",{QPage:b["a"],QSelect:x["a"],QItem:w["a"],QItemSection:_["a"],QBtn:k["a"],QPagination:y["a"],QBtnGroup:q["a"],QIcon:P["a"],QSpinner:C["a"]})},"9c69":function(e,t,r){},b9d0:function(e,t,r){"use strict";var s=r("9c69"),n=r.n(s);n.a}}]);